@using Nitefox.App.Media
@using Nitefox.App.States

@inject MediaPlayerState MediaPlayerState

<audio @onplaying="@OnMediaPlay" autoplay src="@MediaPlayerState.StreamUrl"></audio>

@code
{
    protected override void OnInitialized()
    {
        MediaPlayerState.PropertyChanged += async (_, _) => await InvokeAsync(StateHasChanged);
    }

    private void OnMediaPlay()
    {
        MediaPlayerState.Loaded = true;
    }
}
